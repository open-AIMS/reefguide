@let layers = mapComponent.layers$ | async;
@let numLayers = layers?.length ?? 0;
@let isLoading = mapComponent.loading();

<mat-expansion-panel>
  <mat-expansion-panel-header>
    <span>{{ numLayers }} Layer{{ numLayers > 1 ? 's' : '' }}</span>

    <mat-progress-spinner
      mode="indeterminate"
      diameter="24"
      [style.visibility]="isLoading ? 'visible' : 'hidden'"
    ></mat-progress-spinner>
  </mat-expansion-panel-header>
  @for (layer of layers; track layer) {
    <app-layer-list-item [layer]="layer"></app-layer-list-item>
  }
</mat-expansion-panel>
