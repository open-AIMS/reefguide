<form [formGroup]="resetForm" (ngSubmit)="onSubmit()" class="auth-form">
  <!-- Email Field -->
  <mat-form-field appearance="outline">
    <mat-label>Email Address</mat-label>
    <mat-icon matPrefix>email</mat-icon>
    <input
      matInput
      type="email"
      formControlName="email"
      placeholder="Enter your email"
      autocomplete="email"
    />
    @if (resetForm.get('email')?.hasError('required')) {
      <mat-error>Email is required</mat-error>
    }
    @if (resetForm.get('email')?.hasError('email')) {
      <mat-error>Please enter a valid email address</mat-error>
    }
  </mat-form-field>

  <!-- Error Message -->
  @if (errorMessage()) {
    <div class="error-message" role="alert" aria-live="polite">
      <mat-icon color="warn">error</mat-icon>
      <span>{{ errorMessage() }}</span>
    </div>
  }

  <!-- Submit Button -->
  <button
    mat-raised-button
    color="primary"
    type="submit"
    class="auth-button"
    [disabled]="!canSubmit()"
  >
    @if (isRequesting()) {
      <mat-progress-spinner diameter="20" mode="indeterminate"></mat-progress-spinner>
    } @else {
      <mat-icon>send</mat-icon>
    }
    <span>{{ isRequesting() ? 'Sending reset code...' : 'Send Reset Code' }}</span>
  </button>
</form>

<!-- Navigation Links -->
<mat-divider></mat-divider>
<div class="mode-switch">
  <p>
    Already have a reset code?
    <button mat-button color="primary" type="button" (click)="switchToResetConfirm()">
      Enter my reset code
    </button>
  </p>
  <p>
    Remember your password?
    <button mat-button color="primary" type="button" (click)="switchToLogin()">
      Back to Sign In
    </button>
  </p>
</div>
